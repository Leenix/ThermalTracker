<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ThermalTracker: ThermalTracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ThermalTracker
   </div>
   <div id="projectbrief">Thermal computer vision for Arduino/ESP8266 devices. Intended for the MLX90621 thermopile sensor array and NodeMCU.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_thermal_tracker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ThermalTracker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1caadec6f2b7dadb9fbc2d046fed7667"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thermal_tracker.html#a1caadec6f2b7dadb9fbc2d046fed7667">ThermalTracker</a> (int _running_average_size=RUNNING_AVERAGE_SIZE, int _max_distance_threshold=MAX_DISTANCE_THRESHOLD, int _min_blob_size=MINIMUM_BLOB_SIZE)</td></tr>
<tr class="separator:a1caadec6f2b7dadb9fbc2d046fed7667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0c0369028bfde64e78789d856eeb57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thermal_tracker.html#add0c0369028bfde64e78789d856eeb57">reset_background</a> ()</td></tr>
<tr class="separator:add0c0369028bfde64e78789d856eeb57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f27eacc99d28db31cab4c7907cf405"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thermal_tracker.html#a73f27eacc99d28db31cab4c7907cf405">process_frame</a> (float frame_buffer[FRAME_HEIGHT][FRAME_WIDTH])</td></tr>
<tr class="separator:a73f27eacc99d28db31cab4c7907cf405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dcae63fef65e199b7ab8afe51bee042"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thermal_tracker.html#a8dcae63fef65e199b7ab8afe51bee042">finished_building_background</a> ()</td></tr>
<tr class="separator:a8dcae63fef65e199b7ab8afe51bee042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5c7ede96cdd61b65e5c88fb65e6a868"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thermal_tracker.html#ac5c7ede96cdd61b65e5c88fb65e6a868">get_averages</a> (float frame_buffer[FRAME_HEIGHT][FRAME_WIDTH])</td></tr>
<tr class="separator:ac5c7ede96cdd61b65e5c88fb65e6a868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abba086bc340c336c7e6a14b91ec00ad8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thermal_tracker.html#abba086bc340c336c7e6a14b91ec00ad8">get_variances</a> (float frame_buffer[FRAME_HEIGHT][FRAME_WIDTH])</td></tr>
<tr class="separator:abba086bc340c336c7e6a14b91ec00ad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7cdc3745f2ce5239bb1b7de05f5b711"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thermal_tracker.html#ad7cdc3745f2ce5239bb1b7de05f5b711">has_new_movements</a> ()</td></tr>
<tr class="separator:ad7cdc3745f2ce5239bb1b7de05f5b711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa310ec8521478b8f1f1685ce222140e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_thermal_tracker.html#aa310ec8521478b8f1f1685ce222140e1">get_num_last_blobs</a> ()</td></tr>
<tr class="separator:aa310ec8521478b8f1f1685ce222140e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1caadec6f2b7dadb9fbc2d046fed7667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ThermalTracker::ThermalTracker </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_running_average_size</em> = <code>RUNNING_AVERAGE_SIZE</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_max_distance_threshold</em> = <code>MAX_DISTANCE_THRESHOLD</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_min_blob_size</em> = <code>MINIMUM_BLOB_SIZE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor - Make a new thermal tracker object The thermal tracker uses a MLX90621 thermopile array to observe moving objects in its view. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_running_average_size</td><td>The number of frames to include as the running background average in calculations </td></tr>
    <tr><td class="paramname">_max_distance_threshold</td><td>The maximum amount of difference between blobs before they are considered different objects between frames </td></tr>
    <tr><td class="paramname">_min_blob_size</td><td>The minimum pixel area that an object can occupy before it is tracked</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a8dcae63fef65e199b7ab8afe51bee042"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ThermalTracker::finished_building_background </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine if the tracker has finished build its background frames. </p><dl class="section return"><dt>Returns</dt><dd>True if the tracker has gathered the minumum number of frames.</dd></dl>

</div>
</div>
<a class="anchor" id="ac5c7ede96cdd61b65e5c88fb65e6a868"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ThermalTracker::get_averages </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>frame_buffer</em>[FRAME_HEIGHT][FRAME_WIDTH]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the average temperatures of the background pixels. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame_buffer</td><td>A 2D array to pass the averages into. Averages in deg C</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa310ec8521478b8f1f1685ce222140e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ThermalTracker::get_num_last_blobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the number of blobs that were in the last processed frame. Small blobs below the threshold are cut from the blob numbers.</p>

</div>
</div>
<a class="anchor" id="abba086bc340c336c7e6a14b91ec00ad8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ThermalTracker::get_variances </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>frame_buffer</em>[FRAME_HEIGHT][FRAME_WIDTH]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the temperature variances of the background pixels. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame_buffer</td><td>A 2D array to pass the variances into. Variances in deg C.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad7cdc3745f2ce5239bb1b7de05f5b711"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ThermalTracker::has_new_movements </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine if there have been any new movements since the last check. Grabbing the movements will clear the flag </p><dl class="section return"><dt>Returns</dt><dd>True if there have been any new movements</dd></dl>

</div>
</div>
<a class="anchor" id="a73f27eacc99d28db31cab4c7907cf405"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ThermalTracker::process_frame </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>frame_buffer</em>[FRAME_HEIGHT][FRAME_WIDTH]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process an input thermal frame. If a background has not yet been established, the frame goes directly to the background without tracking. If the background has already been built, then the frame is analysed to detect and track movement. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame_buffer</td><td>A 2D array containing the pixel temperatures from the thermopile sensor.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="add0c0369028bfde64e78789d856eeb57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ThermalTracker::reset_background </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the number of frames in the running background, forcing the tracker to recreate.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_thermal_tracker_8h_source.html">ThermalTracker.h</a></li>
<li>ThermalTracker.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
